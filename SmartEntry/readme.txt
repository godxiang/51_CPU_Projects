由于多机通信没有完成，暂时使用U7的串口3，作为上位机下发数据的端口。

闸机开机以后，定时器0便开始工作，每隔40S向上位机发送一个心跳包。并且身份证模块处于一直寻卡状态，用于脱机认证。


下载身份证，将18位身份证号加上一个两字节的头（序号）储存到FLASH中，flash储存的过程，先搜寻有没有相同的数据，有的话向上位机发送储存失败，没有的话在数据尾部追加数据。
由于FLASH需要先擦除再才能写入，暂时知道最小的擦除操作单位是扇区，所以现在使用一个扇区记录一个身份证号。第一个扇区前两个字节用来记录数据总个数。删除身份证暂时没有实现。